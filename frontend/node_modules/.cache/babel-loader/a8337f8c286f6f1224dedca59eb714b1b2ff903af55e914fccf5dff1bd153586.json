{"ast":null,"code":"import _classCallCheck from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import UserCard from'./UserCard';import\"../../css/CrimeTable.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);var _super=_createSuper(Users);function Users(props){var _this;_classCallCheck(this,Users);_this=_super.call(this,props);_this.handleRowClick=function(id,funRole){_this.setState({selectedRow:id},function(){var token=localStorage.getItem('jwtToken');fetch(\"api/v1/auditor/users/\".concat(id),{method:'GET',// или другой метод\nheaders:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// Добавляем токен в заголовок\n}}).then(function(responses){return responses.json();}).then(function(data){_this.setState({userId:data});_this.setState({isFormOpen:true});_this.setState({roles:funRole});}).catch(function(error){console.error('Ошибка при запросе к серверу:',error);});});};_this.closeForm=function(){_this.setState({isFormOpen:false});};_this.state={selectedRow:null,userId:null,isFormOpen:false,roles:[]};return _this;}_createClass(Users,[{key:\"render\",value:function render(){var _this2=this;var usersList=this.props.usersList;var selectedRow=this.state.selectedRow;return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.isFormOpen&&/*#__PURE__*/_jsx(UserCard,{onClose:this.closeForm,userStat:this.state.userId,roles:this.state.roles}),/*#__PURE__*/_jsx(\"div\",{className:\"user-content-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"user-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"bg-rg\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-label\",children:\"Login\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-label\",children:\"Roles\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-label\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:usersList?usersList.map(function(user){return!user.roles.includes('ADMIN')&&/*#__PURE__*/_jsxs(\"tr\",{className:user.id===selectedRow?'selected-row':'',children:[/*#__PURE__*/_jsx(\"td\",{className:\"table-label-pr\",children:user.login}),/*#__PURE__*/_jsx(\"td\",{className:\"table-label-pr\",children:user.firstName}),/*#__PURE__*/_jsx(\"td\",{className:\"table-label-pr\",children:user.lastName}),/*#__PURE__*/_jsx(\"td\",{className:\"table-label-pr\",children:user.roles.join(', ')}),/*#__PURE__*/_jsx(\"td\",{className:\"table-label-edit\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleRowClick(user.id,user.roles);},children:\"Info\"})})]},user.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"table-label-pr\",children:\"No data available\"})})})]})})})]});}}]);return Users;}(Component);export default Users;","map":{"version":3,"names":["React","Component","UserCard","jsx","_jsx","jsxs","_jsxs","Users","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleRowClick","id","funRole","setState","selectedRow","token","localStorage","getItem","fetch","concat","method","headers","then","responses","json","data","userId","isFormOpen","roles","catch","error","console","closeForm","state","_createClass","key","value","render","_this2","usersList","children","onClose","userStat","className","map","user","includes","login","firstName","lastName","join","onClick","colSpan"],"sources":["/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/src/components/Auditor/Users.js"],"sourcesContent":["import React, { Component } from 'react';\nimport UserCard from './UserCard'\nimport \"../../css/CrimeTable.css\"\nclass Users extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedRow: null,\n            userId:null,\n            isFormOpen:false,\n            roles:[],\n        };\n    }\n\n    handleRowClick = (id, funRole) => {\n        this.setState({ selectedRow: id }, ()=>{\n            const token = localStorage.getItem('jwtToken');\n\n            fetch(`api/v1/auditor/users/${id}`, {\n                method: 'GET', // или другой метод\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`, // Добавляем токен в заголовок\n                },\n            })\n                .then(responses => responses.json())\n                .then(data => {\n                    this.setState({userId:data})\n                    this.setState({isFormOpen: true})\n                    this.setState({roles: funRole})\n                })\n                .catch(error => {\n                    console.error('Ошибка при запросе к серверу:', error);\n                });\n        });\n\n    };\n\n    closeForm = () => {\n        this.setState({ isFormOpen: false });\n    };\n\n\n    render() {\n        const { usersList } = this.props;\n        const { selectedRow } = this.state;\n\n        return (<div>\n            {this.state.isFormOpen &&\n                (<UserCard onClose={this.closeForm} userStat={this.state.userId} roles={this.state.roles}/>)}\n            <div className=\"user-content-container\">\n                <div className=\"user-table-container\">\n                    <table className=\"bg-rg\">\n                        <thead>\n                        <tr>\n                            <th className=\"table-label\">Login</th>\n                            <th className=\"table-label\">First Name</th>\n                            <th className=\"table-label\">Last Name</th>\n                            <th className=\"table-label\">Roles</th>\n                            <th className=\"table-label\">Actions</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {usersList ? (\n                            usersList.map((user) => (\n                                !user.roles.includes('ADMIN') &&\n                                <tr\n                                    key={user.id}\n                                    className={user.id === selectedRow ? 'selected-row' : ''}\n\n                                >\n                                    <td className=\"table-label-pr\">{user.login}</td>\n                                    <td className=\"table-label-pr\">{user.firstName}</td>\n                                    <td className=\"table-label-pr\">{user.lastName}</td>\n                                    <td className=\"table-label-pr\">{user.roles.join(', ')}</td>\n                                    <td className=\"table-label-edit\">\n                                        <button onClick={() => this.handleRowClick(user.id, user.roles)}>\n                                            Info\n                                        </button>\n                                    </td>\n                                </tr>\n                            ))\n                        ) : (\n                            <tr>\n                                <td colSpan=\"5\" className=\"table-label-pr\">No data available</td>\n                            </tr>\n                        )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            </div>\n        );\n    }\n}\n\nexport default Users;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}