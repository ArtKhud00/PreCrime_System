{"ast":null,"code":"var _jsxFileName = \"/home/artem/itmo/MPI/gitrepo/PreCrime_Reborn/frontend/src/components/visions/VisionList.js\";\nimport React from \"react\";\nimport Modal from 'react-modal';\nimport TableVision from \"./TableVision\";\nimport RegMans from \"../boss_group/newMan\";\nimport AddVision from \"./AddVision\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass VisionList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleVideoClick = url => {\n      this.setState({\n        selectedVisionUrl: url\n      });\n    };\n    this.openModal = () => {\n      this.setState({\n        showModal: true\n      });\n    };\n    this.updateStateId = () => {\n      this.setState({\n        prevId: this.state.idGroup\n      });\n      console.log(this.state.prevId);\n    };\n    this.del = async () => {\n      const token = localStorage.getItem('jwtToken');\n      const url = `http://localhost:8028/api/v1/visions/${this.state.idGroup}`;\n      const confirmation = window.confirm(`Are you sure delete this vision?`);\n      if (confirmation) {\n        fetch(url, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        }).then(response => {\n          if (!response.ok) {\n            throw new Error(response.status);\n          }\n          console.log('Данные успешно удалены');\n          this.props.onRenew();\n        }).catch(error => {\n          console.log(error.message);\n          if (error.message === \"500\") {\n            window.alert(\"This vision is already in use\");\n          } else {\n            window.alert(\"You haven't chosen a vision\");\n          }\n        });\n        this.props.onRenew();\n      }\n    };\n    this.acceptVision = async () => {\n      const token = localStorage.getItem('jwtToken');\n      this.state.idGroup !== 0 ? fetch(`http://localhost:8028/api/v1/visions/${this.state.idGroup}/accept`, {\n        method: 'POST',\n        // или другой метод\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` // Добавляем токен в заголовок\n        },\n\n        body: JSON.stringify({})\n      }).then(response => response.json()).then(data => {\n        this.setState({\n          vision: data\n        }, () => {\n          this.props.onRenew();\n        });\n      }).catch(error => {}) : window.alert(\"you don't choosing vision\");\n    };\n    this.updateState = newValue => {\n      this.setState({\n        idGroup: newValue\n      });\n      console.log(this.state.idGroup);\n    };\n    this.updateWrk = () => {\n      this.setState({\n        showWorking: true\n      });\n    };\n    this.state = {\n      showModal: false,\n      showModal_1: false,\n      showModal_2: false,\n      showWorking: false,\n      idGroup: 0,\n      manData: null,\n      prevId: 0,\n      isModalOpen: false,\n      // состояние модального окна\n      selectedVisionUrl: null // URL выбранного видео\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      prevId,\n      idGroup\n    } = this.state;\n    if (prevId !== idGroup) {\n      this.updateStateId();\n    }\n  }\n  render() {\n    const {\n      manData,\n      idGroup,\n      prevId,\n      isModalOpen,\n      selectedVisionUrl\n    } = this.state;\n    const {\n      visions,\n      onRenew\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"car-text\",\n        children: \"Visions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TableVision, {\n        visionList: visions,\n        updateUrl: this.handleVideoClick,\n        updateId: this.updateState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"header-pr\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"acc-vis\",\n          onClick: this.acceptVision,\n          children: \"Accept Vision\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"del-vis\",\n          onClick: this.del,\n          children: \"Delete Vision\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), selectedVisionUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          title: \"Vision Video\",\n          width: \"900\",\n          height: \"800\",\n          src: selectedVisionUrl,\n          frameBorder: \"0\",\n          allowFullScreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 18\n    }, this);\n  }\n}\nexport default VisionList;","map":{"version":3,"names":["React","Modal","TableVision","RegMans","AddVision","jsxDEV","_jsxDEV","VisionList","Component","constructor","props","handleVideoClick","url","setState","selectedVisionUrl","openModal","showModal","updateStateId","prevId","state","idGroup","console","log","del","token","localStorage","getItem","confirmation","window","confirm","fetch","method","headers","then","response","ok","Error","status","onRenew","catch","error","message","alert","acceptVision","body","JSON","stringify","json","data","vision","updateState","newValue","updateWrk","showWorking","showModal_1","showModal_2","manData","isModalOpen","componentDidUpdate","prevProps","prevState","render","visions","children","className","fileName","_jsxFileName","lineNumber","columnNumber","visionList","updateUrl","updateId","onClick","title","width","height","src","frameBorder","allowFullScreen"],"sources":["/home/artem/itmo/MPI/gitrepo/PreCrime_Reborn/frontend/src/components/visions/VisionList.js"],"sourcesContent":["import React from \"react\";\nimport Modal from 'react-modal';\nimport TableVision from \"./TableVision\";\nimport RegMans from \"../boss_group/newMan\";\nimport AddVision from \"./AddVision\";\nclass VisionList extends React.Component {\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            showModal: false,\n            showModal_1: false,\n            showModal_2: false,\n            showWorking:false,\n            idGroup:0,\n            manData: null,\n            prevId:0,\n            isModalOpen: false, // состояние модального окна\n            selectedVisionUrl: null, // URL выбранного видео\n        }\n\n    }\n\n\n    handleVideoClick = (url) => {\n        this.setState({ selectedVisionUrl: url });\n    };\n\n    openModal = () => {\n        this.setState({ showModal: true });\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n        const {prevId, idGroup} = this.state\n        if (prevId !== idGroup) {\n            this.updateStateId();\n        }\n    }\n\n\n    updateStateId = () => {\n        this.setState({ prevId: this.state.idGroup})\n        console.log(this.state.prevId)\n    };\n\n\n    del = async () => {\n        const token = localStorage.getItem('jwtToken');\n        const url = `http://localhost:8028/api/v1/visions/${this.state.idGroup}`;\n        const confirmation = window.confirm(`Are you sure delete this vision?`);\n\n        if (confirmation) {\n            fetch(url, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`,\n                },\n            })\n                .then(response => {\n                    if (!response.ok) {\n                        throw new Error(response.status);\n                    }\n                    console.log('Данные успешно удалены');\n                    this.props.onRenew()\n                })\n                .catch(error => {\n                    console.log(error.message)\n                    if (error.message === \"500\") {\n                        window.alert(\"This vision is already in use\");\n                    } else {\n                        window.alert(\"You haven't chosen a vision\");\n                    }\n                });\n            this.props.onRenew()\n        }\n    }\n\n    acceptVision = async () => {\n        const token = localStorage.getItem('jwtToken');\n        (this.state.idGroup !== 0) ? (\n        fetch(`http://localhost:8028/api/v1/visions/${this.state.idGroup}/accept`, {\n            method: 'POST', // или другой метод\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`, // Добавляем токен в заголовок\n            },\n            body: JSON.stringify({\n            }),\n        })\n            .then(response => response.json())\n            .then(data => {\n                this.setState({vision: data}, ()=>{this.props.onRenew()});\n\n            })\n            .catch(error => {\n\n            })) : window.alert(\"you don't choosing vision\")\n\n\n    };\n\n    updateState = (newValue) => {\n        this.setState({ idGroup: newValue });\n        console.log(this.state.idGroup)\n    };\n\n    updateWrk = () => {\n        this.setState({ showWorking: true });\n    };\n\n    render() {\n        const { manData, idGroup, prevId, isModalOpen, selectedVisionUrl } = this.state;\n        const {visions, onRenew} = this.props\n        return ( <div>\n                <h1 className=\"car-text\">Visions</h1>\n                <TableVision visionList={visions} updateUrl={this.handleVideoClick} updateId={this.updateState}/>\n                <header className=\"header-pr\">\n                <button className=\"acc-vis\" onClick={this.acceptVision}>Accept Vision</button>\n                <button className=\"del-vis\" onClick={this.del}>Delete Vision</button>\n                </header>\n                {selectedVisionUrl && (\n                <div className=\"video-container\">\n                    <iframe\n                        title=\"Vision Video\"\n                        width=\"900\"\n                        height=\"800\"\n                        src={selectedVisionUrl}\n                        frameBorder=\"0\"\n                        allowFullScreen\n                    ></iframe>\n                </div>\n                )\n\n                }\n            </div>\n\n        )\n    }\n}\n\nexport default VisionList"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}