{"ast":null,"code":"import _classCallCheck from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import Header from\"../Header\";import ListCards from\"../crime_card/ListCards\";import BurgerMenu from\"../BurgerMenu\";import CrimeForm from\"../crime_card/CreateCard\";import Criminals from\"./Criminals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DetectiveMain=/*#__PURE__*/function(_React$Component){_inherits(DetectiveMain,_React$Component);var _super=_createSuper(DetectiveMain);function DetectiveMain(props){var _this;_classCallCheck(this,DetectiveMain);_this=_super.call(this,props);_this.openModal=function(){_this.setState({showModal:true});_this.setState({showModal_2:false});var token=localStorage.getItem('jwtToken');fetch('api/v1/cards',{method:'GET',// или другой метод\nheaders:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// Добавляем токен в заголовок\n}}).then(function(responses){return responses.json();}).then(function(data){_this.setState({cards:data});}).catch(function(error){console.error('Ошибка при запросе к серверу:',error);});};_this.closeModal=function(){_this.setState({showModal:false});_this.props.renew();};_this.CreateCarted=function(e){_this.setState({showCard:e});_this.fetchVisions();};_this.CloseCarted=function(){_this.setState({showCard:false});};_this.openCriminals=function(){_this.setState({showModal_2:true});_this.setState({showModal:false});};_this.closeBurger=function(){_this.setState({showBurger:false});_this.props.renew();};_this.fetchVisions=function(){var token=localStorage.getItem('jwtToken');fetch('api/v1/visions',{method:'GET',// или другой метод\nheaders:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)// Добавляем токен в заголовок\n}}).then(function(responses){return responses.json();}).then(function(data){_this.setState({visions:data});console.log(_this.state.visions);}).catch(function(error){console.error('Ошибка при запросе к серверу:',error);});};_this.state={showModal:false,showModal_2:false,showBurger:false,showCard:false,cards:null,visions:null};return _this;}_createClass(DetectiveMain,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,onChange=_this$props.onChange,me=_this$props.me;var visibleRoles=[\"DETECTIVE\",\"AUDITOR\",\"REACTIONGROUP\",\"TECHNIC\"];var rolesToDisplay=visibleRoles.filter(function(role){return me.roles.includes(role);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{isLogged:this.props.isLogged,me:me}),/*#__PURE__*/_jsx(BurgerMenu,{onClose:this.closeBurger,roles:rolesToDisplay,updatePull:this.props.pullRole}),this.state.showCard&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CrimeForm,{onClose:this.CloseCarted,visions:this.state.visions})}),/*#__PURE__*/_jsx(\"div\",{className:\"frame-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rectangle-2\",children:[this.state.showModal&&/*#__PURE__*/_jsx(ListCards,{onClose:this.closeModal,crimeList:this.state.cards,onRenew:this.openModal,role:\"DETECTIVE\"}),this.state.showModal_2&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Criminals,{onClose:this.closeModal,crimeList:this.state.cards,onRenew:this.openModal,role:\"DETECTIVE\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"frame-but\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rectangle-but\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"card-list\",onClick:this.openModal,children:\"Card List\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){_this2.CreateCarted(true);},className:\"create-card\",children:\"Create Crime Card\"}),/*#__PURE__*/_jsx(\"button\",{className:\"card-list\",onClick:this.openCriminals,children:\"Criminals\"})]})})]});}}]);return DetectiveMain;}(React.Component);export default DetectiveMain;","map":{"version":3,"names":["React","Header","ListCards","BurgerMenu","CrimeForm","Criminals","jsx","_jsx","jsxs","_jsxs","DetectiveMain","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","openModal","setState","showModal","showModal_2","token","localStorage","getItem","fetch","method","headers","concat","then","responses","json","data","cards","catch","error","console","closeModal","renew","CreateCarted","e","showCard","fetchVisions","CloseCarted","openCriminals","closeBurger","showBurger","visions","log","state","_createClass","key","value","render","_this2","_this$props","onChange","me","visibleRoles","rolesToDisplay","filter","role","roles","includes","children","isLogged","onClose","updatePull","pullRole","className","crimeList","onRenew","onClick","Component"],"sources":["/home/mrvito/MyJavaRep/PreCrime_Reborn/frontend/src/components/Detective/DetectiveMain.js"],"sourcesContent":["import React from \"react\";\nimport Header from \"../Header\";\nimport ListCards from \"../crime_card/ListCards\";\nimport BurgerMenu from \"../BurgerMenu\";\nimport CrimeForm from \"../crime_card/CreateCard\";\nimport Criminals from \"./Criminals\";\n\nclass DetectiveMain extends React.Component {\n    constructor(props) {\n\n        super(props);\n        this.state = {\n            showModal: false,\n            showModal_2:false,\n            showBurger: false,\n            showCard:false,\n            cards:null,\n            visions:null\n        }\n\n    }\n\n    openModal = () => {\n        this.setState({ showModal: true });\n        this.setState({ showModal_2: false })\n        const token = localStorage.getItem('jwtToken');\n\n        fetch('api/v1/cards', {\n            method: 'GET', // или другой метод\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`, // Добавляем токен в заголовок\n            },\n        })\n            .then(responses => responses.json())\n            .then(data => {\n                this.setState({cards:data})\n            })\n            .catch(error => {\n                console.error('Ошибка при запросе к серверу:', error);\n            });\n    };\n\n    closeModal = () => {\n        this.setState({showModal: false});\n        this.props.renew();\n    };\n\n    CreateCarted = (e) => {\n        this.setState({showCard: e})\n        this.fetchVisions()\n    }\n\n    CloseCarted = () => {\n        this.setState({showCard: false})\n    }\n\n\n    openCriminals = () => {\n        this.setState({showModal_2: true})\n        this.setState({showModal: false})\n    }\n\n    closeBurger = () => {\n        this.setState({showBurger: false});\n        this.props.renew();\n    };\n\n    fetchVisions = () => {\n        const token = localStorage.getItem('jwtToken');\n        fetch('api/v1/visions', {\n            method: 'GET', // или другой метод\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`, // Добавляем токен в заголовок\n            },\n        })\n            .then(responses => responses.json())\n            .then(data => {\n                this.setState({ visions: data });\n                console.log(this.state.visions)\n            })\n            .catch(error => {\n                console.error('Ошибка при запросе к серверу:', error);\n            });\n    };\n\n\n\n\n    render() {\n        const {onChange, me} = this.props\n        const visibleRoles = [\"DETECTIVE\", \"AUDITOR\", \"REACTIONGROUP\",\"TECHNIC\"];\n        const rolesToDisplay = visibleRoles.filter(role => me.roles.includes(role));\n        return (<div>\n                <Header isLogged={this.props.isLogged} me={me}/>\n                <BurgerMenu onClose={this.closeBurger} roles={rolesToDisplay} updatePull={this.props.pullRole}/>\n\n                {this.state.showCard && (\n                    <div>\n                        <CrimeForm onClose={this.CloseCarted} visions={this.state.visions}/>\n                    </div>\n                )}\n\n\n\n\n                <div className=\"frame-2\">\n                    <div className=\"rectangle-2\">\n                        {this.state.showModal && (\n                                <ListCards onClose={this.closeModal}\n                                           crimeList={this.state.cards}\n                                           onRenew={this.openModal}\n                                           role={\"DETECTIVE\"}/>\n                        )}\n                        {this.state.showModal_2 && (\n                            <div>\n                                <Criminals onClose={this.closeModal}\n                                           crimeList={this.state.cards}\n                                           onRenew={this.openModal}\n                                           role={\"DETECTIVE\"}/>\n                            </div>\n                        )}\n                    </div>\n                </div>\n                <div className=\"frame-but\">\n                    <div className=\"rectangle-but\" >\n                        <button className=\"card-list\" onClick={this.openModal}>Card List</button>\n                        <button onClick={()=>{this.CreateCarted(true)}} className=\"create-card\">Create Crime Card</button>\n                        <button className=\"card-list\" onClick={this.openCriminals}>Criminals</button>\n                    </div>\n                </div>\n                </div>\n        )\n    }\n}\n\nexport default DetectiveMain"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}